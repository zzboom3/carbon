## 目标
- 以现有前端 `carbon_front/src/api` 为唯一依据，补齐 `/system`、`/assets`、`/trade`（以及必要的兼容接口）所有被调用但后端缺失/方法不匹配的接口。
- 保证接口返回结构与前端期望一致：至少不再 404/500，页面可打开；在可用数据源存在时再逐步完善真实业务查询。

## 现状结论（基于当前代码扫描）
- `carbon-assets` 与 `carbon-trade` 存在大量“Controller 为空 + ServiceImpl 为空 + Mapper XML 为空”的骨架代码，前端调用的分页/详情/新增/更新/删除等接口目前未实现。
- `carbon-system` 还有少量前端依赖接口需要补齐（例如 dict 分页/字典项 CRUD、DataPanel 的 greenness/operation 数据、TenantUser POST 兼容、飞书接口 GET/POST 兼容等）。
- 访问链路必须保证 `carbon-auth` 正常注册到网关（否则网关鉴权会导致部分接口异常响应）。

## 实施策略
- **按“前端接口清单 → 后端映射补齐”闭环推进**：每补齐一组接口就用网关地址回归测试（200 + JSON body）。
- **优先保证可用性**：在数据库/ES/RocketMQ 等依赖不可用时，接口先返回“空列表/默认值/成功标记”，避免前端崩溃；后续再补真实查询。
- **统一返回体**：所有新接口使用 `ApiResult` 包装，分页使用 `Paging`（records/total/current）。

## 模块补齐清单
### 1) carbon-system（系统模块）
- 字典模块：补齐 `/sysDict/getPageList`、`/sysDict/add`、`/sysDict/update`、`/sysDict/delete/{id}`、`/sysDict/dictConfig/*`（字典项分页/增删改）、`/sysDict/getCityDict`。
- 数据面板：补齐 `/dataPanel/getGreenness`、`/dataPanel/getCarbonAssets`（字段对齐前端 `operationData.vue`）。
- 租户用户：补齐 `POST /tenantUser/getPageList` 以兼容前端调用方式；补齐 `POST /tenantUser/add`、`PUT /tenantUser/cashBack/{userId}/{amount}`（先最小可用）。
- 飞书接口兼容：为 `/feishu/update`、`/feishu/updateByNum` 增加 GET 兼容以及 `/feishu/update/test`。

### 2) carbon-assets（资产模块，工作量最大）
按前端使用频率从高到低补齐 Controller：
- **碳配额** `/carbonQuotaAssets/*`：`assetsTotal`、`getPageList`、`info/{id}`、`add`、`update`、`delete/{id}`。
- **碳信用** `/carbonCreditAssets/*`：`assetsTotal`、`getPageList`、`info/{id}`、`add`、`update`、`delete`（兼容前端 `POST delete?id=...`）。
- **交易所** `/carbonExchange/*`：`getPageList`、`list`/`getListByTenant`、`add`、`update`、`delete/{id}`、`info/{id}`。
- **交易账户** `/exchangeAccount/*`：`getPageList`、`info/{id}`、`add`、`binding`、`unbind/{id}`、`uploadCredential`（若前端有上传）。
- **项目开发** `/carbonProject/*`：`getDevelopPageList`、`getPageList`、`getNoWaitExaminePageList`、`info/{id}`、`add`、`update`、`delete/{id}`、`uploadOwnerData`（若依赖 OSS/本地存储，先返回成功并记录元信息）。
- **项目文档** `/carbonProjectDoc/*`：`add`、`getPageList`、`info/{id}`、`delete/{id}`。
- **数据报送/监测** `/carbonSourceData/*`、`/carbonProjectMonitoringData/*`：分页/详情/增删改（先最小 CRUD）。
- **方法学** `/carbonMethodology/*`：分页/详情/增删改/上传（上传接口先可用，存储策略后续完善）。

实现方式：
- 对于“只需 CRUD + 分页”的接口，优先使用 MyBatis-Plus 的 `page/list/getById/save/updateById/removeById` + `QueryWrapper/LambdaQueryWrapper`。
- 复杂统计（assetsTotal）先返回结构化默认值（0/空列表）确保前端可渲染；后续再基于表结构聚合。

### 3) carbon-trade（交易模块）
- **供需行情** `/carbonTradeQuote/*`：`search`、`add`、`getPageList`、`startTrading`。
- **询报价** `/carbonTradePrice/*`：`getPageList`、`info/{id}`、`update`、`intendedTransaction`。
- 复用已存在的 `/carbonTradeContract/*`（当前已实现）。

实现方式：
- 先实现数据库分页/CRUD（不依赖 ES/RocketMQ）。
- ES 搜索与 MQ 异步逻辑先降级为“DB like 查询/同步写库”，待基础功能稳定后再接回 ES/MQ。

## 运行与依赖治理（确保能启动验证）
- 统一本地配置：让 `carbon-assets`、`carbon-trade` 的 dev profile 数据库地址/端口与当前可用 MySQL 对齐（避免出现像 3333 端口连接失败导致服务起不来）。
- 对 RocketMQ/Elasticsearch/Nacos：在本地缺失时做“可选依赖/降级”，保证服务至少能启动并对外提供核心 REST 接口。

## 验证方式
- 自动化回归：写一个简单的“接口探测脚本”遍历前端 `/src/api` 的所有 url（只测状态码 + JSON 结构关键字段）。
- 手工关键链路：
  - 首页：dataPanel、sysDict、资讯分页。
  - 资产：配额/信用列表分页、详情、创建/编辑/删除。
  - 交易：供需行情分页与查询。
  - 用户：tenantUser 列表、sysAccount 分页与更新。

## 交付结果
- 后端三大模块 `/system` `/assets` `/trade` 与前端 API 清单完全对齐：不再出现因接口缺失导致的 404/500。
- 对外接口返回结构稳定，页面可正常打开与基本操作可用；高级能力（ES/MQ/统计聚合）以“增量增强”方式补齐。

如果你确认按这个计划推进，我会先从 `carbon-assets` 与 `carbon-trade` 的空 Controller 开始批量补齐接口（优先分页/详情/增删改），同时调整本地配置让服务可启动，然后逐页回归前端直到控制台不再报接口错误。