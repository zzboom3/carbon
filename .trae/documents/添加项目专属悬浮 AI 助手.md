# 修正计划：增强 AI 助手上下文提示词

您指出的提示词问题非常关键。简单的占位符无法满足“针对本项目”的需求。我将构建一个**动态、深度的系统提示词生成逻辑**，确保 AI 真正理解“绿度银行管理平台”的业务背景。

## 1. 核心改进：动态提示词 (System Prompt) 设计

在 `src/components/AiAssistant/index.vue` 中，我将实现一个 `generateSystemPrompt()` 函数，它会实时组合以下三层信息：

### A. 固定的项目领域知识 (Project Knowledge)

* **身份定义**: "你是 Carbon Management System的专属智能助手。"

* **业务能力**: "本系统包含以下核心模块：

  1. **碳资产管理**: 碳减排项目申报、配额管理、减排量核算。
  2. **碳交易**: 挂牌、交易撮合、资金结算。
  3. **系统管理**: 用户/租户管理、权限配置、日志审计。
  4. **认证中心**: 单点登录、多端（PC/移动）认证。"

* **回答原则**: "请基于系统业务逻辑回答，遇到不确定的数据引导用户查询对应列表。"

### B. 动态用户信息 (User Context)

* 从 Vuex 获取：`当前登录用户: {name} (角色: {roles})`。

* **作用**: AI 可以根据角色调整语气（如对管理员更偏技术配置，对普通用户偏业务操作）。

### C. 实时页面上下文 (Page Context)

* 从路由获取：`用户当前所在页面: {pageTitle} (路径: {path})`。

* **作用**: 如果用户问“怎么新建？”，AI 知道是在问“新建用户”还是“新建碳资产”。

## 2. 组件实现 (AiAssistant)

* **位置**: `src/components/AiAssistant/index.vue`

* **交互**: 保持右下角悬浮，支持展开/收起。

* **接口**: 预留标准的 OpenAI 格式接口调用代码（URL/Key 待填），**请求体将自动携带上述生成的 System Prompt**。

## 3. 全局集成

* 修改 `src/layout/index.vue`，引入该组件，使其在整个后台管理系统中生效。

这样设计后，AI 就不再是一个通用的聊天机器人，而是“知道你是谁、知道你在哪、知道系统是干什么”的**项目专属助手**。
