## 目标
- 在本机把基础依赖（Nacos/Redis/RocketMQ/MySQL）+ 后端（gate/auth/system/assets/trade）+ 前端（Vue dev server）全部启动，保证“登录→访问页面→接口可用”闭环。

## 现状与关键点（基于代码配置）
- 前端默认请求网关：`http://localhost:9091/`（[settingMer.js](file:///d:/desktop/Carbon_manage_system/carbon_official/carbon_front/src/utils/settingMer.js)）。
- 网关端口 9091，并路由到：auth(9001 `/authCenter`)、system(9002 `/system`)、assets(9003 `/assets`)、trade(9005 `/trade`)（[carbon-gate application.yml](file:///d:/desktop/Carbon_manage_system/carbon_official/carbon_back/carbon-gate/src/main/resources/application.yml)）。
- 仓库根目录已有 docker-compose（Nacos/Redis/RocketMQ），但 Redis 设了密码 `1234`（[docker-compose.yml](file:///d:/desktop/Carbon_manage_system/carbon_official/docker-compose.yml)），而后端 yml 多数未配置 redis password，需要对齐。
- 数据库需要导入初始化数据：`carbon_back/carbon.sql`（包含 sys_role 等权限相关表）。

## 1) 基础依赖启动（Docker）
- 使用现有 `docker-compose.yml` 启动：Nacos(8848)、Redis(6379, 带密码 1234)、RocketMQ namesrv(9876)+broker(10911)。
- 补齐 MySQL：在 compose 里新增 mysql 服务（例如 3306），并将 `carbon.sql` 作为 init 脚本自动导入，保证权限表/基础表齐全。
- 统一网络地址：后端 dev 配置里的 `192.168.100.128:*` 统一改成 `localhost:*`（或提供一套 `application-local.yml`），确保任何人 clone 后可直接启动。

## 2) 后端配置对齐（开发环境）
- 统一所有服务的 dev 配置：
  - MySQL：`jdbc:mysql://localhost:3306/carbon`
  - Redis：`localhost:6379` + `password: 1234`（与 compose 一致）
  - Nacos：`localhost:8848`
  - RocketMQ：`localhost:9876`
- 邮箱/OSS 等外部账号：改为通过环境变量注入或在 dev 中禁用，避免仓库内出现真实口令（当前 yml 里存在 QQ 邮箱授权码，应迁移到本机私有配置）。

## 3) 后端构建与启动顺序
- 构建顺序（确保依赖先 install 到本地仓库）：
  1) `carbon-frame`（父工程/公共模块）
  2) `carbon-auth`、`carbon-system`、`carbon-assets`、`carbon-trade`、`carbon-gate`
- 启动顺序（保证注册发现、路由可用）：
  1) Nacos/Redis/RocketMQ/MySQL
  2) `carbon-auth`（9001）
  3) `carbon-system`（9002）
  4) `carbon-assets`（9003）
  5) `carbon-trade`（9005）
  6) `carbon-gate`（9091）
- 每个服务启动后用日志与端口探活（Tomcat started/Started xxxApplication）。

## 4) 前端启动与 API 指向
- 前端 `npm install` 后 `npm run dev`，默认端口 9528（[vue.config.js](file:///d:/desktop/Carbon_manage_system/carbon_official/carbon_front/vue.config.js)）。
- 确认前端 API 指向网关：
  - `localStorage.apiBaseURL = "http://localhost:9091/"`（或通过 `.env.development` 的 `VUE_APP_BASE_API` 固化）

## 5) 系统集成验证清单
- **基础连通**：
  - `http://localhost:9528/` 页面可打开
  - `http://localhost:9091/authCenter/...`、`/system/...`、`/assets/...`、`/trade/...` 路由能通
- **登录闭环**：登录接口成功返回 token，携带 token 访问任一业务接口返回 200。
- **跨域与鉴权**：
  - CORS 响应头正确
  - 401（未登录）与 403（无权限）前端提示正确
- **权限数据**：若导入的 `carbon.sql` 权限表不完整，提供 dev 开关（例如 `carbon.security.permitAll=true`）用于本地快速跑通页面；生产环境关闭。

## 交付物（我会在你确认后直接动手实现）
- 更新/新增：`docker-compose.yml`（补 mysql + 初始化脚本挂载）
- 新增：`application-local.yml`（或统一改 dev 指向 localhost，并支持 env 覆盖）
- 新增：一键启动脚本（Windows PowerShell）用于按顺序启动后端服务
- 前端：补 `.env.development` 或启动说明，确保默认连到 gate
- 最终：我会在本机把前后端都跑起来，并用一组实际 HTTP 请求验证登录/接口/页面联通

确认后我就按这个方案开始改配置、补 docker-compose、并把全套服务拉起来。